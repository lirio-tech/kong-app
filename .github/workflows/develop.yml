name: Develop CI/CD

on:
  release:
    types: [push, pull_request]
  push:
    branches:    
      - develop     

jobs:
  deploy:

    runs-on: ubuntu-latest
    steps:
      -
        name: Login to DockerHub
        uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_PASSWORD }}
      - 
        uses: actions/checkout@v2
      -
        name: BuildAndTest with Gradle
        run: |
          npm version patch
          git config --local user.email "diegolirio.dl@gmail.com"
          git config --local user.name "GitHub Action"
          git commit -m "Changes Version Patch" -a
          git pull origin develop          
      - 
        name: Push changes
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: develop

                    